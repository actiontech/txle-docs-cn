# 手动补偿

手动补偿功能是保证(微服务)分布式事务场景下的数据最终一致性的核心功能。

手动补偿功能需通过在业务方法上添加注解@Compensable和编写对应的补偿接口来启用，补偿接口需被编写在同类中，且接口返回类型、参数类型等均要与被补偿的接口保持统一。

若开启了手动补偿功能，则子业务执行前开启子事务的同时会记录对应的补偿方法到当前子事务事件中，供后续(全局事务出现异常时)补偿调用。

手动补偿失败时，会收集全局事务和业务的异常信息并形成异常快照[上报至差错平台](../3.1_server_function/3.1.3_report_exception.md)。

手动补偿接口需支持幂等性。